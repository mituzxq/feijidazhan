{"version":3,"sources":["file:///C:/Users/zxq/Desktop/%E9%A3%9E%E6%9C%BA%E5%A4%A7%E6%88%98/NewProject/assets/script/Collider.ts"],"names":["_decorator","Component","Contact2DType","PhysicsSystem2D","Label","Enemy","EnemyBullet","Energy","GameManger","PlayerBullet","ccclass","Collider","dieNumber","start","instance","on","BEGIN_CONTACT","onBeginContact","update","deltaTime","node","getComponent","randoms","selfCollider","otherCollider","contact","tag","die","setScore","children","string","energy"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAuBC,MAAAA,a,OAAAA,a;AAA4CC,MAAAA,e,OAAAA,e;AAAiBC,MAAAA,K,OAAAA,K;;AAChGC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,M,iBAAAA,M;;AACAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;OACH;AAAEC,QAAAA;AAAF,O,GAAcV,U;;0BAGPW,Q,WADZD,OAAO,CAAC,UAAD,C,gBAAR,MACaC,QADb,SAC8BV,SAD9B,CACwC;AAAA;AAAA;AAAA,eAEpCW,SAFoC,GAEhB,CAFgB;AAAA;;AAIpCC,QAAAA,KAAK,GAAG;AACJV,UAAAA,eAAe,CAACW,QAAhB,CAAyBC,EAAzB,CAA4Bb,aAAa,CAACc,aAA1C,EAAyD,KAAKC,cAA9D,EAA8E,IAA9E;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACtB,cAAI,KAAKP,SAAL,GAAiB,EAAjB,IAAuB,CAAvB,IAA4B,KAAKA,SAAL,IAAkB,CAAlD,EAAqD;AACjD,iBAAKQ,IAAL,CAAUC,YAAV;AAAA;AAAA,0CAAmCC,OAAnC;AACH;AACJ;;AAEDL,QAAAA,cAAc,CAACM,YAAD,EAA2BC,aAA3B,EAAsDC,OAAtD,EAAyF;AACnG,cAAKF,YAAY,CAACG,GAAb,IAAoB,CAApB,IAAyBF,aAAa,CAACE,GAAd,IAAqB,CAA/C,IAAsDH,YAAY,CAACG,GAAb,IAAoB,CAApB,IAAyBF,aAAa,CAACE,GAAd,IAAqB,CAAxG,EAA4G;AACxG,gBAAIH,YAAY,CAACG,GAAb,IAAoB,CAAxB,EAA2B;AACvBH,cAAAA,YAAY,CAACF,YAAb;AAAA;AAAA,gDAAwCM,GAAxC;AACAH,cAAAA,aAAa,CAACH,YAAd;AAAA;AAAA,kCAAkCM,GAAlC;AACH;;AACD,gBAAIJ,YAAY,CAACG,GAAb,IAAoB,CAAxB,EAA2B;AACvBH,cAAAA,YAAY,CAACF,YAAb;AAAA;AAAA,kCAAiCM,GAAjC;AACAH,cAAAA,aAAa,CAACH,YAAd;AAAA;AAAA,gDAAyCM,GAAzC;AACH;;AACD,iBAAKC,QAAL;AACH;;AACD,cAAKL,YAAY,CAACG,GAAb,IAAoB,CAApB,IAAyBF,aAAa,CAACE,GAAd,IAAqB,CAA/C,IAAsDH,YAAY,CAACG,GAAb,IAAoB,CAApB,IAAyBF,aAAa,CAACE,GAAd,IAAqB,CAAxG,EAA4G;AACxG,gBAAIF,aAAa,CAACE,GAAd,IAAqB,CAAzB,EAA4B;AACxBH,cAAAA,YAAY,CAACF,YAAb;AAAA;AAAA,8CAAuCM,GAAvC;AACH;;AACD,gBAAIJ,YAAY,CAACG,GAAb,IAAoB,CAAxB,EAA2B;AACvBH,cAAAA,YAAY,CAACF,YAAb;AAAA;AAAA,8CAAuCM,GAAvC;AACH;AACJ,WAnBkG,CAoBnG;AACA;AACA;AACA;AACA;;AACH;;AAEDC,QAAAA,QAAQ,GAAG;AACP,eAAKR,IAAL,CAAUS,QAAV,CAAmB,CAAnB,EAAsBR,YAAtB,CAAmCjB,KAAnC,EAA0C0B,MAA1C,GAAmD,WAAW,EAAE,KAAKlB,SAArE;AACA,eAAKQ,IAAL,CAAUS,QAAV,CAAmB,CAAnB,EAAsBR,YAAtB;AAAA;AAAA,gCAA2CU,MAA3C;AACH;;AA5CmC,O","sourcesContent":["import { _decorator, Component, Collider2D, Contact2DType, director, IPhysics2DContact, PhysicsSystem2D, Label } from 'cc';\nimport { Enemy } from './Enemy';\nimport { EnemyBullet } from './EnemyBullet';\nimport { Energy } from './Energy';\nimport { GameManger } from './GameManger';\nimport { PlayerBullet } from './PlayerBullet';\nconst { ccclass } = _decorator;\n\n@ccclass('Collider')\nexport class Collider extends Component {\n\n    dieNumber: number = 0;\n\n    start() {\n        PhysicsSystem2D.instance.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\n    }\n\n    update(deltaTime: number) {\n        if (this.dieNumber % 10 == 0 && this.dieNumber != 0) {\n            this.node.getComponent(GameManger).randoms();\n        }\n    }\n\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\n        if ((selfCollider.tag == 1 && otherCollider.tag == 2) || (selfCollider.tag == 2 && otherCollider.tag == 1)) {\n            if (selfCollider.tag == 1) {\n                selfCollider.getComponent(PlayerBullet).die();\n                otherCollider.getComponent(Enemy).die();\n            }\n            if (selfCollider.tag == 2) {\n                selfCollider.getComponent(Enemy).die();\n                otherCollider.getComponent(PlayerBullet).die();\n            }\n            this.setScore();\n        }\n        if ((selfCollider.tag == 2 && otherCollider.tag == 3) || (selfCollider.tag == 3 && otherCollider.tag == 2)) {\n            if (otherCollider.tag == 3) {\n                selfCollider.getComponent(EnemyBullet).die();\n            }\n            if (selfCollider.tag == 3) {\n                selfCollider.getComponent(EnemyBullet).die();\n            }\n        }\n        // if ((selfCollider.tag == 0 && otherCollider.tag == 2) || (selfCollider.tag == 2 && otherCollider.tag == 0) ||\n        //     (selfCollider.tag == 0 && otherCollider.tag == 3) || (selfCollider.tag == 3 && otherCollider.tag == 0)) {\n        //     alert(\"你以死亡，分数：\" + this.dieNumber);\n        //     director.purgeDirector();\n        // }\n    }\n\n    setScore() {\n        this.node.children[0].getComponent(Label).string = \"score:\" + ++this.dieNumber;\n        this.node.children[1].getComponent(Energy).energy();\n    }\n}\n\n"]}