{"version":3,"sources":["file:///C:/Users/zxq/Desktop/%E9%A3%9E%E6%9C%BA%E5%A4%A7%E6%88%98/NewProject/assets/script/Enemy.ts"],"names":["_decorator","Component","instantiate","Prefab","AudioSource","assert","ccclass","property","Enemy","type","onLoad","audioSource","node","getComponent","_audioSource","start","enemybullet","pause","update","deltaTime","bulletY","position","y","speed","setPosition","x","die","schedule","buller","enemybullerPre","setParent","parent","play","enemydiePre","destroy"],"mappings":";;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;AAAwBC,MAAAA,M,OAAAA,M;;;;;;;OACvE;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;uBAGjBQ,K,WADZF,OAAO,CAAC,OAAD,C,UAEHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEN;AAAR,OAAD,C,UAGRI,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEN;AAAR,OAAD,C,UAGRI,QAAQ,CAACH,WAAD,C,2BARb,MACaI,KADb,SAC2BP,SAD3B,CACqC;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAajCS,QAAAA,MAAM,GAAG;AACL,gBAAMC,WAAW,GAAG,KAAKC,IAAL,CAAUC,YAAV,CAAuBT,WAAvB,CAApB,CADK,CAEL;;AACAC,UAAAA,MAAM,CAACM,WAAD,CAAN,CAHK,CAIL;;AACA,eAAKG,YAAL,GAAoBH,WAApB;AAGH;;AACDI,QAAAA,KAAK,GAAG;AACJ,eAAKC,WAAL;AACA,eAAKC,KAAL;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACtB,cAAIC,OAAO,GAAG,KAAKR,IAAL,CAAUS,QAAV,CAAmBC,CAAjC;AACAF,UAAAA,OAAO,IAAI,KAAKG,KAAL,GAAaJ,SAAxB;AACA,eAAKP,IAAL,CAAUY,WAAV,CAAsB,KAAKZ,IAAL,CAAUS,QAAV,CAAmBI,CAAzC,EAA4CL,OAA5C,EAAqD,CAArD;;AACA,cAAIA,OAAO,GAAG,CAAC,GAAf,EAAoB;AAChB,iBAAKM,GAAL;AACH;AACJ,SAlCgC,CAoCjC;;;AACAV,QAAAA,WAAW,GAAG;AACV,eAAKW,QAAL,CAAc,MAAM;AAChB,gBAAIC,MAAM,GAAG1B,WAAW,CAAC,KAAK2B,cAAN,CAAxB;AACAD,YAAAA,MAAM,CAACE,SAAP,CAAiB,KAAKlB,IAAL,CAAUmB,MAA3B;AACA,gBAAIV,QAAQ,GAAG,KAAKT,IAAL,CAAUS,QAAzB;AACAO,YAAAA,MAAM,CAACJ,WAAP,CAAmBH,QAAQ,CAACI,CAA5B,EAA+BJ,QAAQ,CAACC,CAAT,GAAa,EAA5C,EAAgD,CAAhD;AACH,WALD,EAKG,GALH;AAMH;;AAEDI,QAAAA,GAAG,GAAG;AACF,eAAKZ,YAAL,CAAkBkB,IAAlB,GADE,CAEF;AACA;AACA;AACA;AACA;AACA;;;AACA,cAAIN,GAAG,GAAGxB,WAAW,CAAC,KAAK+B,WAAN,CAArB;AACAP,UAAAA,GAAG,CAACI,SAAJ,CAAc,KAAKlB,IAAL,CAAUmB,MAAxB;AACAL,UAAAA,GAAG,CAACF,WAAJ,CAAgB,KAAKZ,IAAL,CAAUS,QAA1B;AAEA,eAAKT,IAAL,CAAUsB,OAAV;AACH;;AACDF,QAAAA,IAAI,GAAG;AACH;AACA,eAAKlB,YAAL,CAAkBkB,IAAlB;AACH;;AAEDf,QAAAA,KAAK,GAAG;AACJ;AACA,eAAKH,YAAL,CAAkBG,KAAlB;AACH;;AApEgC,O;;;;;iBAED,I;;;;;;;iBAGH,I;;;;;;;iBAGM,I;;gFAElCV,Q;;;;;iBACe,G","sourcesContent":["import { _decorator, Component, instantiate, Prefab, AudioSource, AudioClip, assert } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Enemy')\nexport class Enemy extends Component {\n    @property({ type: Prefab })\n    enemybullerPre: Prefab | null = null;\n\n    @property({ type: Prefab })\n    enemydiePre: Prefab | null = null;\n\n    @property(AudioSource)\n    public _audioSource: AudioSource = null!;\n\n    @property\n    speed: number = 100;\n\n    onLoad() {\n        const audioSource = this.node.getComponent(AudioSource)!;\n        // 检查是否含有 AudioSource，如果没有，则输出错误消息\n        assert(audioSource);\n        // 将组件赋到全局变量 _audioSource 中\n        this._audioSource = audioSource;\n\n\n    }\n    start() {\n        this.enemybullet();\n        this.pause();\n    }\n\n    update(deltaTime: number) {\n        let bulletY = this.node.position.y;\n        bulletY -= this.speed * deltaTime;\n        this.node.setPosition(this.node.position.x, bulletY, 0);\n        if (bulletY < -300) {\n            this.die();\n        }\n    }\n\n    //给敌机生成子弹\n    enemybullet() {\n        this.schedule(() => {\n            let buller = instantiate(this.enemybullerPre);\n            buller.setParent(this.node.parent);\n            let position = this.node.position;\n            buller.setPosition(position.x, position.y - 30, 0);\n        }, 0.5)\n    }\n\n    die() {\n        this._audioSource.play();\n        // resources.load(\"img/enemydie.png\", SpriteFrame, (err, res) => {\n        //     if (err) {\n        //         console.log(err);\n        //     }\n        //     this.node.getComponent(Sprite).spriteFrame = res;\n        // })\n        let die = instantiate(this.enemydiePre);\n        die.setParent(this.node.parent);\n        die.setPosition(this.node.position);\n\n        this.node.destroy();\n    }\n    play() {\n        // 播放音乐\n        this._audioSource.play();\n    }\n\n    pause() {\n        // 暂停音乐\n        this._audioSource.pause();\n    }\n}"]}