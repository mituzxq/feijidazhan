{"version":3,"sources":["file:///C:/Users/zxq/Desktop/%E9%A3%9E%E6%9C%BA%E5%A4%A7%E6%88%98/NewProject/assets/script/Missile.ts"],"names":["_decorator","Component","v3","Enemy","ccclass","property","Missile","start","schedule","node","position","nodeX","x","nodeY","y","birY","parent","getChildByName","getComponent","birX","setPosition","update","deltaTime","rotation","theangle","Math","atan2","theta","PI","eulerAngles","die","destroy"],"mappings":";;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,E,OAAAA,E;;AAC7BC,MAAAA,K,iBAAAA,K;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;yBAGjBM,O,WADZF,OAAO,CAAC,SAAD,C,gBAAR,MACaE,OADb,SAC6BL,SAD7B,CACuC;AACnCM,QAAAA,KAAK,GAAG;AACJ,eAAKC,QAAL,CAAc,MAAM;AAChB,gBAAIC,IAAI,GAAG,KAAKA,IAAL,CAAUC,QAArB;AACA,gBAAIC,KAAK,GAAGF,IAAI,CAACG,CAAjB;AACA,gBAAIC,KAAK,GAAGJ,IAAI,CAACK,CAAjB;AACA,gBAAIC,IAAI,GAAG,KAAKN,IAAL,CAAUO,MAAV,CAAiBC,cAAjB,CAAgC,OAAhC,EAAyCC,YAAzC;AAAA;AAAA,gCAA6DT,IAA7D,CAAkEC,QAAlE,CAA2EE,CAAtF;AACA,gBAAIO,IAAI,GAAG,KAAKV,IAAL,CAAUO,MAAV,CAAiBC,cAAjB,CAAgC,OAAhC,EAAyCC,YAAzC;AAAA;AAAA,gCAA6DT,IAA7D,CAAkEC,QAAlE,CAA2EI,CAAtF;;AACA,gBAAID,KAAK,GAAGE,IAAZ,EAAkB;AACd,mBAAKN,IAAL,CAAUW,WAAV,CAAsBX,IAAI,CAACG,CAA3B,EAA8BH,IAAI,CAACK,CAAL,GAAS,CAAvC;AACH,aAFD,MAEO,IAAID,KAAK,IAAIE,IAAb,EAAmB;AACtB,mBAAKN,IAAL,CAAUW,WAAV,CAAsBX,IAAI,CAACG,CAA3B,EAA8BH,IAAI,CAACK,CAAnC;AACH;;AACD,gBAAIK,IAAI,GAAG,CAAX,EAAc;AACV,kBAAIR,KAAK,GAAGQ,IAAZ,EAAkB;AACd,qBAAKV,IAAL,CAAUW,WAAV,CAAsBX,IAAI,CAACG,CAAL,GAAS,CAA/B,EAAkCH,IAAI,CAACK,CAAvC;AACH,eAFD,MAEO;AACH,qBAAKL,IAAL,CAAUW,WAAV,CAAsBX,IAAI,CAACG,CAA3B,EAA8BH,IAAI,CAACK,CAAnC;AACH;AACJ,aAND,MAMO,IAAIK,IAAI,GAAG,CAAX,EAAc;AACjB,kBAAIR,KAAK,GAAGQ,IAAZ,EAAkB;AACd,qBAAKV,IAAL,CAAUW,WAAV,CAAsBX,IAAI,CAACG,CAAL,GAAS,CAA/B,EAAkCH,IAAI,CAACK,CAAvC;AACH,eAFD,MAEO;AACH,qBAAKL,IAAL,CAAUW,WAAV,CAAsBX,IAAI,CAACG,CAA3B,EAA8BH,IAAI,CAACK,CAAnC;AACH;AACJ,aANM,MAMA;AACH,mBAAKL,IAAL,CAAUW,WAAV,CAAsBX,IAAI,CAACG,CAA3B,EAA8BH,IAAI,CAACK,CAAnC;AACH;AACJ,WA1BD,EA0BG,IA1BH;AA2BH;;AAEDO,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACtB,eAAKC,QAAL;AAGH,SAnCkC,CAoCnC;;;AACAA,QAAAA,QAAQ,GAAG;AACP,cAAIC,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAW,KAAKjB,IAAL,CAAUC,QAAV,CAAmBI,CAAnB,GAAuB,KAAKL,IAAL,CAAUO,MAAV,CAAiBC,cAAjB,CAAgC,OAAhC,EAAyCP,QAAzC,CAAkDI,CAApF,EACX,KAAKL,IAAL,CAAUC,QAAV,CAAmBE,CAAnB,GAAuB,KAAKH,IAAL,CAAUO,MAAV,CAAiBC,cAAjB,CAAgC,OAAhC,EAAyCP,QAAzC,CAAkDE,CAD9D,CAAf;AAEA,cAAIe,KAAK,GAAGH,QAAQ,GAAG,GAAX,GAAiBC,IAAI,CAACG,EAAlC;AACA,eAAKnB,IAAL,CAAUoB,WAAV,GAAwB3B,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAOyB,KAAP,CAA1B;AACH;;AAEDG,QAAAA,GAAG,GAAG;AACF,eAAKrB,IAAL,CAAUsB,OAAV;AACH;;AA9CkC,O","sourcesContent":["import { _decorator, Component, Node, v3 } from 'cc';\nimport { Enemy } from './Enemy';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Missile')\nexport class Missile extends Component {\n    start() {\n        this.schedule(() => {\n            let node = this.node.position;\n            let nodeX = node.x;\n            let nodeY = node.y;\n            let birY = this.node.parent.getChildByName(\"enemy\").getComponent(Enemy).node.position.x;\n            let birX = this.node.parent.getChildByName(\"enemy\").getComponent(Enemy).node.position.y;\n            if (nodeY < birY) {\n                this.node.setPosition(node.x, node.y + 1);\n            } else if (nodeY == birY) {\n                this.node.setPosition(node.x, node.y);\n            }\n            if (birX < 0) {\n                if (nodeX > birX) {\n                    this.node.setPosition(node.x - 1, node.y);\n                } else {\n                    this.node.setPosition(node.x, node.y);\n                }\n            } else if (birX > 0) {\n                if (nodeX < birX) {\n                    this.node.setPosition(node.x + 1, node.y);\n                } else {\n                    this.node.setPosition(node.x, node.y);\n                }\n            } else {\n                this.node.setPosition(node.x, node.y);\n            }\n        }, 0.01);\n    }\n\n    update(deltaTime: number) {\n        this.rotation();\n\n\n    }\n    //旋转\n    rotation() {\n        let theangle = Math.atan2(this.node.position.y - this.node.parent.getChildByName(\"enemy\").position.y,\n            this.node.position.x - this.node.parent.getChildByName(\"enemy\").position.x);\n        let theta = theangle * 180 / Math.PI;\n        this.node.eulerAngles = v3(0, 0, theta);\n    }\n\n    die() {\n        this.node.destroy();\n    }\n}\n"]}