{"version":3,"sources":["file:///C:/Users/zxq/Desktop/%E9%A3%9E%E6%9C%BA%E5%A4%A7%E6%88%98/NewProject/assets/script/Collider.ts"],"names":["_decorator","Component","Contact2DType","director","PhysicsSystem2D","Enemy","GameManger","PlayerBullet","ccclass","property","Collider","Score","node","parent","getComponent","dieNumber","start","instance","on","BEGIN_CONTACT","onBeginContact","update","deltaTime","selfCollider","otherCollider","contact","tag","die","score","alert","purgeDirector"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAA6BC,MAAAA,a,OAAAA,a;AAAeC,MAAAA,Q,OAAAA,Q;AAA6BC,MAAAA,e,OAAAA,e;;AACrFC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;0BAGjBU,Q,WADZF,OAAO,CAAC,UAAD,C,gBAAR,MACaE,QADb,SAC8BT,SAD9B,CACwC;AAAA;AAAA;AAAA,eACpCU,KADoC,GAC5B,KAAKC,IAAL,CAAUC,MAAV,CAAiBC,YAAjB;AAAA;AAAA,uCAD4B;AAAA,eAGpCC,SAHoC,GAGhB,CAHgB;AAAA;;AAIpCC,QAAAA,KAAK,GAAG;AACJZ,UAAAA,eAAe,CAACa,QAAhB,CAAyBC,EAAzB,CAA4BhB,aAAa,CAACiB,aAA1C,EAAyD,KAAKC,cAA9D,EAA8E,IAA9E;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAEDF,QAAAA,cAAc,CAACG,YAAD,EAA2BC,aAA3B,EAAsDC,OAAtD,EAAyF;AACnG,cAAKF,YAAY,CAACG,GAAb,IAAoB,CAApB,IAAyBF,aAAa,CAACE,GAAd,IAAqB,CAA/C,IAAsDH,YAAY,CAACG,GAAb,IAAoB,CAApB,IAAyBF,aAAa,CAACE,GAAd,IAAqB,CAAxG,EAA4G;AACxG,gBAAIH,YAAY,CAACG,GAAb,IAAoB,CAAxB,EAA2B;AACvBH,cAAAA,YAAY,CAACT,YAAb;AAAA;AAAA,gDAAwCa,GAAxC;AACAH,cAAAA,aAAa,CAACV,YAAd;AAAA;AAAA,kCAAkCa,GAAlC;AACH;;AACD,gBAAIJ,YAAY,CAACG,GAAb,IAAoB,CAAxB,EAA2B;AACvBH,cAAAA,YAAY,CAACT,YAAb;AAAA;AAAA,kCAAiCa,GAAjC;AACAH,cAAAA,aAAa,CAACV,YAAd;AAAA;AAAA,gDAAyCa,GAAzC;AACH;;AACD,iBAAKhB,KAAL,CAAWiB,KAAX;AACH;;AACD,cAAKL,YAAY,CAACG,GAAb,IAAoB,CAApB,IAAyBF,aAAa,CAACE,GAAd,IAAqB,CAA/C,IAAsDH,YAAY,CAACG,GAAb,IAAoB,CAApB,IAAyBF,aAAa,CAACE,GAAd,IAAqB,CAAxG,EAA4G;AACxGG,YAAAA,KAAK,CAAC,aAAa,KAAKd,SAAnB,CAAL;AACAZ,YAAAA,QAAQ,CAAC2B,aAAT;AACH;AACJ;;AA5BmC,O","sourcesContent":["import { _decorator, Component, Node, Collider2D, Contact2DType, director, IPhysics2DContact, PhysicsSystem2D } from 'cc';\nimport { Enemy } from './Enemy';\nimport { GameManger } from './GameManger';\nimport { PlayerBullet } from './PlayerBullet';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Collider')\nexport class Collider extends Component {\n    Score = this.node.parent.getComponent(GameManger);\n\n    dieNumber: number = 0;\n    start() {\n        PhysicsSystem2D.instance.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\n    }\n\n    update(deltaTime: number) {\n\n    }\n\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\n        if ((selfCollider.tag == 1 && otherCollider.tag == 2) || (selfCollider.tag == 2 && otherCollider.tag == 1)) {\n            if (selfCollider.tag == 1) {\n                selfCollider.getComponent(PlayerBullet).die();\n                otherCollider.getComponent(Enemy).die();\n            }\n            if (selfCollider.tag == 2) {\n                selfCollider.getComponent(Enemy).die();\n                otherCollider.getComponent(PlayerBullet).die();\n            }\n            this.Score.score();\n        }\n        if ((selfCollider.tag == 0 && otherCollider.tag == 2) || (selfCollider.tag == 2 && otherCollider.tag == 0)) {\n            alert(\"你以死亡，分数：\" + this.dieNumber);\n            director.purgeDirector();\n        }\n    }\n}\n\n"]}