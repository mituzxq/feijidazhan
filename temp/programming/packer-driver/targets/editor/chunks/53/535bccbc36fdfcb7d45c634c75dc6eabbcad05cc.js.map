{"version":3,"sources":["file:///C:/Users/zxq/Desktop/%E9%A3%9E%E6%9C%BA%E5%A4%A7%E6%88%98/NewProject/assets/script/Collider.ts"],"names":["_decorator","Component","Contact2DType","PhysicsSystem2D","Label","director","BoxCollider2D","Enemy","Enemy1","EnemyBullet","EnemyBullet1","GameManger","Missile","PlayerBullet","ccclass","Collider","dieNumber","count","start","instance","on","BEGIN_CONTACT","onBeginContact","update","deltaTime","selfCollider","otherCollider","contact","tag","getComponent","die","setScore","node","parent","getChildByName","randoms","alert","purgeDirector","loadScene","children","string","change","schedule"],"mappings":"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","sourcesContent":["import { _decorator, Component, Collider2D, Contact2DType, IPhysics2DContact, PhysicsSystem2D, Label, director, BoxCollider2D } from 'cc';\nimport { Enemy } from './Enemy';\nimport { Enemy1 } from './Enemy1';\nimport { EnemyBullet } from './EnemyBullet';\nimport { EnemyBullet1 } from './EnemyBullet1';\nimport { GameManger } from './GameManger';\nimport { Missile } from './Missile';\nimport { PlayerBullet } from './PlayerBullet';\nconst { ccclass } = _decorator;\n\n@ccclass('Collider')\nexport class Collider extends Component {\n\n    dieNumber: number = 1;\n    count: number = 0;\n\n    start() {\n        PhysicsSystem2D.instance.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\n    }\n\n    update(deltaTime: number) {\n\n    }\n\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\n        // 0:玩家,1:玩家子弹,2:敌人,3:敌人子弹,4:导弹,5:护盾,6:敌人1,7:敌人子弹1\n        //子弹\n        if ((selfCollider.tag == 1 && otherCollider.tag == 2) || (selfCollider.tag == 2 && otherCollider.tag == 1)) {\n            if (selfCollider.tag == 1) {\n                selfCollider.getComponent(PlayerBullet).die();\n                otherCollider.getComponent(Enemy).die();\n            }\n            if (selfCollider.tag == 2) {\n                selfCollider.getComponent(Enemy).die();\n                otherCollider.getComponent(PlayerBullet).die();\n            }\n            this.setScore();\n        }\n        if ((selfCollider.tag == 1 && otherCollider.tag == 6) || (selfCollider.tag == 6 && otherCollider.tag == 1)) {\n            if (selfCollider.tag == 1) {\n                selfCollider.getComponent(PlayerBullet).die();\n                // otherCollider.getComponent(Enemy1).die();\n                this.count++;\n            }\n            if (selfCollider.tag == 6) {\n                this.count++;\n                // selfCollider.getComponent(Enemy1).die();\n                otherCollider.getComponent(PlayerBullet).die();\n            }\n            if (this.count == 2) {\n                this.node.parent.getChildByName(\"enemy1\").getComponent(Enemy1).die();\n                this.count = 1;\n            }\n            this.setScore();\n            this.node.getComponent(GameManger).randoms();\n        }\n        //导弹\n        if ((selfCollider.tag == 2 && otherCollider.tag == 4) || (selfCollider.tag == 4 && otherCollider.tag == 2)) {\n            if (selfCollider.tag == 4) {\n                selfCollider.getComponent(Missile).die();\n                otherCollider.getComponent(Enemy).die();\n            }\n            if (selfCollider.tag == 2) {\n                selfCollider.getComponent(Enemy).die();\n                otherCollider.getComponent(Missile).die();\n            }\n            this.setScore();\n        }\n        //敌机与敌机子弹\n        if ((selfCollider.tag == 2 && otherCollider.tag == 3) || (selfCollider.tag == 3 && otherCollider.tag == 2)) {\n            if (otherCollider.tag == 3) {\n                otherCollider.getComponent(EnemyBullet).die();\n            }\n            if (selfCollider.tag == 3) {\n                selfCollider.getComponent(EnemyBullet).die();\n            }\n        }\n        //护盾\n        if ((selfCollider.tag == 3 && otherCollider.tag == 5) || (selfCollider.tag == 5 && otherCollider.tag == 3)) {\n            if (selfCollider.tag == 3) {\n                selfCollider.getComponent(EnemyBullet).die();\n            }\n            if (otherCollider.tag == 3) {\n                otherCollider.getComponent(EnemyBullet).die();\n            }\n        }\n        if ((selfCollider.tag == 5 && otherCollider.tag == 7) || (selfCollider.tag == 7 && otherCollider.tag == 5)) {\n            if (selfCollider.tag == 7) {\n                selfCollider.getComponent(EnemyBullet1).die();\n            }\n            if (otherCollider.tag == 7) {\n                otherCollider.getComponent(EnemyBullet1).die();\n            }\n        }\n        //死亡\n        if ((selfCollider.tag == 0 && otherCollider.tag == 2) || (selfCollider.tag == 2 && otherCollider.tag == 0) ||\n            (selfCollider.tag == 0 && otherCollider.tag == 3) || (selfCollider.tag == 3 && otherCollider.tag == 0) ||\n            (selfCollider.tag == 0 && otherCollider.tag == 7) || (selfCollider.tag == 7 && otherCollider.tag == 0)) {\n            alert(\"你以死亡，分数：\" + this.dieNumber);\n            director.purgeDirector();\n            director.loadScene(\"Begin\");\n        }\n    }\n    //分数\n    setScore() {\n        this.node.children[0].getComponent(Label).string = \"score:\" + this.dieNumber++;\n    }\n    //护盾\n    change() {\n        this.node.parent.getChildByName(\"hero\").getComponent(BoxCollider2D).tag = 1234;\n        this.schedule(() => {\n            this.node.parent.getChildByName(\"hero\").getComponent(BoxCollider2D).tag = 0;\n        }, 5, 1)\n    }\n}\n\n"]}