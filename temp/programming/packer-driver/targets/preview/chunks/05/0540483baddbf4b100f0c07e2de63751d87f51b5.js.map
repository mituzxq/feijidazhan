{"version":3,"sources":["file:///C:/Users/zxq/Desktop/%E9%A3%9E%E6%9C%BA%E5%A4%A7%E6%88%98/NewProject/assets/script/GameManger.ts"],"names":["_decorator","Component","Contact2DType","instantiate","PhysicsSystem2D","Prefab","Label","director","Bullet","enemyManger","ccclass","property","GameManger","type","dieNumber","start","schedule","buller","bullerPre","setParent","node","parent","player","children","position","setPosition","x","y","ememyX","Math","floor","random","enemy","enemyPre","instance","on","BEGIN_CONTACT","onBeginContact","update","deltaTime","selfCollider","otherCollider","contact","tag","getComponent","die","score","alert","purgeDirector","loadScene","t","printScore","string"],"mappings":"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","sourcesContent":["import { _decorator, Component, Collider2D, Contact2DType, instantiate, IPhysics2DContact, PhysicsSystem2D, Prefab, Label, director } from 'cc';\nimport { Again } from './Again';\nimport { Bullet } from './Bullet';\nimport { enemyManger } from './enemyManger';\nimport { Player } from './Player';\nimport { ScoreControl } from './ScoreControl';\nconst { ccclass, property } = _decorator;\n@ccclass('GameManger')\nexport class GameManger extends Component {\n    @property({ type: Prefab })\n    bullerPre: Prefab | null = null;\n\n    @property({ type: Prefab })\n    enemyPre: Prefab | null = null;\n    dieNumber: number = 0;\n    start() {\n        this.schedule(() => {\n            let buller = instantiate(this.bullerPre);\n            buller.setParent(this.node.parent);\n            let player = this.node.children[0].position;\n            buller.setPosition(player.x, player.y + 40, 0);\n        }, 0.5)\n\n        this.schedule(() => {\n            let ememyX = Math.floor(Math.random() * 160) - 80;\n            let enemy = instantiate(this.enemyPre);\n            enemy.setParent(this.node.parent);\n            enemy.setPosition(ememyX, 150, 0);\n        }, 1)\n        PhysicsSystem2D.instance.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\n\n    }\n\n    update(deltaTime: number) {\n\n    }\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\n        if ((selfCollider.tag == 0 && otherCollider.tag == 1) || (selfCollider.tag == 1 && otherCollider.tag == 0)) {\n            if (selfCollider.tag == 0) {\n                selfCollider.getComponent(Bullet).die();\n                otherCollider.getComponent(enemyManger).die();\n            }\n            if (selfCollider.tag == 1) {\n                selfCollider.getComponent(enemyManger).die();\n                otherCollider.getComponent(Bullet).die();\n            }\n            this.score();\n\n        }\n        if ((selfCollider.tag == 1 && otherCollider.tag == 3) || (selfCollider.tag == 3 && otherCollider.tag == 1)) {\n            alert(\"你以死亡，分数：\" + this.dieNumber);\n            director.purgeDirector();\n            director.loadScene(\"begin\");\n        }\n    }\n    score() {\n        let t = this.dieNumber++;\n        this.printScore();\n    }\n    printScore() {\n        let score = this.node.children[1];\n        score.getComponent(Label).string = this.dieNumber + \"\";\n    }\n\n}\n\n"]}