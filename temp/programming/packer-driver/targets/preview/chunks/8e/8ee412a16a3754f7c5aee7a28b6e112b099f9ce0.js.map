{"version":3,"sources":["file:///C:/Users/zxq/Desktop/%E9%A3%9E%E6%9C%BA%E5%A4%A7%E6%88%98/NewProject/assets/BeginScript/MainScene.ts"],"names":["Missile","ccclass","property","cc","_decorator","MainScene","Prefab","Node","Component","missileList","onLoad","node","on","EventType","TOUCH_START","onTouchStart","e","localPos","convertToNodeSpaceAR","getLocation","targetFlag","x","y","missile","instantiate","missilePB","parent","angle","push","i","length","getComponent","setTargetPos"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAOOA,MAAAA,O;;;;;;;OAED;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBC,EAAE,CAACC,U;;yBAIZC,S,WAGhBH,QAAQ,CAACC,EAAE,CAACG,MAAJ,C,UAGRJ,QAAQ,CAACC,EAAE,CAACI,IAAJ,C,EAPZN,O,qBAAD,MACqBI,SADrB,SACuCF,EAAE,CAACK,SAD1C,CACoD;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eASxCC,WATwC,GAS1B,EAT0B;AAAA;;AASpB;AAE5BC,QAAAA,MAAM,GAAG;AACL,eAAKC,IAAL,CAAUC,EAAV,CAAaT,EAAE,CAACI,IAAH,CAAQM,SAAR,CAAkBC,WAA/B,EAA4C,KAAKC,YAAjD,EAA+D,IAA/D;AACH,SAb+C,CAehD;;;AACQA,QAAAA,YAAY,CAACC,CAAD,EAAyB;AACzC;AACA,cAAIC,QAAQ,GAAG,KAAKN,IAAL,CAAUO,oBAAV,CAA+BF,CAAC,CAACG,WAAF,EAA/B,CAAf,CAFyC,CAIzC;;AACA,eAAKC,UAAL,CAAgBC,CAAhB,GAAoBJ,QAAQ,CAACI,CAA7B;AACA,eAAKD,UAAL,CAAgBE,CAAhB,GAAoBL,QAAQ,CAACK,CAA7B,CANyC,CAQzC;;AACA,cAAIC,OAAgB,GAAGpB,EAAE,CAACqB,WAAH,CAAe,KAAKC,SAApB,CAAvB;AACAF,UAAAA,OAAO,CAACG,MAAR,GAAiB,KAAKf,IAAtB;AACAY,UAAAA,OAAO,CAACF,CAAR,GAAY,CAAZ;AACAE,UAAAA,OAAO,CAACD,CAAR,GAAY,CAAZ;AACAC,UAAAA,OAAO,CAACI,KAAR,GAAgB,EAAhB,CAbyC,CAezC;;AACA,eAAKlB,WAAL,CAAiBmB,IAAjB,CAAsBL,OAAtB,EAhByC,CAkBzC;;AACA,eAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKpB,WAAL,CAAiBqB,MAArC,EAA6CD,CAAC,EAA9C,EAAkD;AAC9C,iBAAKpB,WAAL,CAAiBoB,CAAjB,EAAoBE,YAApB;AAAA;AAAA,oCAA0CC,YAA1C,CAAuDf,QAAQ,CAACI,CAAhE,EAAmEJ,QAAQ,CAACK,CAA5E;AACH;AACJ;;AAtC+C,O;;;;;iBAIzB,I;;;;;;;iBAGD,I","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport Missile from \"./Missile\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n\r\n@ccclass\r\nexport default class MainScene extends cc.Component {\r\n\r\n\r\n    @property(cc.Prefab)   //导弹预制体\r\n    missilePB: cc.Prefab = null;\r\n\r\n    @property(cc.Node)     //目的地标识\r\n    targetFlag: cc.Node = null;\r\n \r\n    private missileList = [];   //导弹列表\r\n\r\n    onLoad() {\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);\r\n    }\r\n\r\n    //触摸开始，设置点击位置为目的地\r\n    private onTouchStart(e: cc.Event.EventTouch) {\r\n        //计算触摸地点\r\n        var localPos = this.node.convertToNodeSpaceAR(e.getLocation());\r\n\r\n        //目的地标识\r\n        this.targetFlag.x = localPos.x;\r\n        this.targetFlag.y = localPos.y;\r\n\r\n        //生成一个导弹\r\n        var missile: cc.Node = cc.instantiate(this.missilePB);\r\n        missile.parent = this.node;\r\n        missile.x = 0;\r\n        missile.y = 0;\r\n        missile.angle = 90;\r\n\r\n        //保存到列表\r\n        this.missileList.push(missile);\r\n\r\n        //所有导弹设置目的地\r\n        for (var i = 0; i < this.missileList.length; i++) {\r\n            this.missileList[i].getComponent(Missile).setTargetPos(localPos.x, localPos.y);\r\n        }\r\n    }\r\n}\r\n"]}