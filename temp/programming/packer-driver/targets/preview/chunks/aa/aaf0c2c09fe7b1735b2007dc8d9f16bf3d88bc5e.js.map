{"version":3,"sources":["file:///C:/Users/zxq/Desktop/%E9%A3%9E%E6%9C%BA%E5%A4%A7%E6%88%98/NewProject/assets/script/Enemy.ts"],"names":["_decorator","Component","instantiate","Prefab","resources","SpriteFrame","Sprite","ccclass","property","Enemy","type","start","load","err","res","console","log","spriteFrameEnemydie","enemybullet","update","deltaTime","bulletY","node","position","y","speed","setPosition","x","die","schedule","buller","enemybullerPre","setParent","parent","t","getComponent","spriteFrame","b"],"mappings":";;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,M,OAAAA,M;;;;;;;OACvE;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;uBAGjBS,K,WADZF,OAAO,CAAC,OAAD,C,UAEHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEP;AAAR,OAAD,C,UAGRK,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEL;AAAR,OAAD,C,2BALb,MACaI,KADb,SAC2BR,SAD3B,CACqC;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAUjCU,QAAAA,KAAK,GAAG;AACJP,UAAAA,SAAS,CAACQ,IAAV,CAAe,yBAAf,EAA0CP,WAA1C,EAAuD,CAACQ,GAAD,EAAMC,GAAN,KAAc;AACjE,gBAAID,GAAJ,EAAS;AACLE,cAAAA,OAAO,CAACC,GAAR,CAAY,sBAAsBH,GAAlC;AACH;;AACD,iBAAKI,mBAAL,GAA2BH,GAA3B;AACH,WALD;AAMA,eAAKI,WAAL;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACtB,cAAIC,OAAO,GAAG,KAAKC,IAAL,CAAUC,QAAV,CAAmBC,CAAjC;AACAH,UAAAA,OAAO,IAAI,KAAKI,KAAL,GAAaL,SAAxB;AACA,eAAKE,IAAL,CAAUI,WAAV,CAAsB,KAAKJ,IAAL,CAAUC,QAAV,CAAmBI,CAAzC,EAA4CN,OAA5C,EAAqD,CAArD;;AACA,cAAIA,OAAO,GAAG,CAAC,GAAf,EAAoB;AAChB,iBAAKO,GAAL;AACH;AACJ,SA3BgC,CA6BjC;;;AACAV,QAAAA,WAAW,GAAG;AACV,eAAKW,QAAL,CAAc,MAAM;AAChB,gBAAIC,MAAM,GAAG5B,WAAW,CAAC,KAAK6B,cAAN,CAAxB;AACAD,YAAAA,MAAM,CAACE,SAAP,CAAiB,KAAKV,IAAL,CAAUW,MAA3B;AACA,gBAAIV,QAAQ,GAAG,KAAKD,IAAL,CAAUC,QAAzB;AACAO,YAAAA,MAAM,CAACJ,WAAP,CAAmBH,QAAQ,CAACI,CAA5B,EAA+BJ,QAAQ,CAACC,CAAT,GAAa,EAA5C,EAAgD,CAAhD;AACH,WALD,EAKG,GALH;AAMH;;AAEDI,QAAAA,GAAG,GAAG;AACFxB,UAAAA,SAAS,CAACQ,IAAV,CAAe,kBAAf,EAAmCP,WAAnC,EAAgD,CAACQ,GAAD,EAAMC,GAAN,KAAc;AAC1D,gBAAIoB,CAAC,GAAG,KAAKZ,IAAL,CAAUa,YAAV,CAAuB7B,MAAvB,EAA+B8B,WAAvC;AACAF,YAAAA,CAAC,GAAGpB,GAAJ;AACA,gBAAIuB,CAAC,GAAGxB,GAAR;AACH,WAJD;AAKH;;AA7CgC,O;;;;;iBAED,I;;;;;;;iBAGiB,I;;gFAEhDL,Q;;;;;iBACe,G","sourcesContent":["import { _decorator, Component, instantiate, Prefab, resources, SpriteFrame, Sprite } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Enemy')\nexport class Enemy extends Component {\n    @property({ type: Prefab })\n    enemybullerPre: Prefab | null = null;\n\n    @property({ type: SpriteFrame })\n    public spriteFrameEnemydie: SpriteFrame | null = null;\n\n    @property\n    speed: number = 100;\n\n    start() {\n        resources.load(\"assets/img/enemydie.png\", SpriteFrame, (err, res) => {\n            if (err) {\n                console.log(\"resources.load - \" + err);\n            }\n            this.spriteFrameEnemydie = res;\n        });\n        this.enemybullet();\n    }\n\n    update(deltaTime: number) {\n        let bulletY = this.node.position.y;\n        bulletY -= this.speed * deltaTime;\n        this.node.setPosition(this.node.position.x, bulletY, 0);\n        if (bulletY < -300) {\n            this.die();\n        }\n    }\n\n    //给敌机生成子弹\n    enemybullet() {\n        this.schedule(() => {\n            let buller = instantiate(this.enemybullerPre);\n            buller.setParent(this.node.parent);\n            let position = this.node.position;\n            buller.setPosition(position.x, position.y - 30, 0);\n        }, 0.5)\n    }\n\n    die() {\n        resources.load(\"img/enemydie.png\", SpriteFrame, (err, res) => {\n            let t = this.node.getComponent(Sprite).spriteFrame;\n            t = res;\n            let b = err;\n        })\n    }\n}"]}